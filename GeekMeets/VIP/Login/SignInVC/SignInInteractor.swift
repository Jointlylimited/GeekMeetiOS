//
//  SignInInteractor.swift
//  NearByEventPlan
//
//  Created by Hiren Gohel on 10/01/19.
//  Copyright (c) 2019 SOTSYS203. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol SignInInteractorProtocol
{
    func callSignInAPI(_ userName : String, password : String)
}

class SignInInteractor: SignInInteractorProtocol {
    var presenter: SignInPresentationProtocol?
    //var name: String = ""
    
    // MARK: Do something
    func callSignInAPI(_ userName : String, password : String)
    {
//        let authentication = AuthenticationObj.getAutheticationToken()
//        AppsingtonObj.showActivityIndicatior()
//        
//        UserAPI.signIn(nonce: authentication.nonce, timestamp: authentication.timeStamp, token: authentication.token, tiUserType: APPUser.Customer, username: userName, cPassword: password, vLangISOCode: selectLanguage?.languageCode, vDeviceToken: UserDefaults.standard.getDeviceToken(), tiDeviceType: 1, vDeviceName: "") { (userResponse, error) in
//            if error == nil
//            {
//                AppsingtonObj.removeActivityIndicatior()
//                if let response = userResponse
//                {
//                    if response.responseCode == AppResponseCode.UNAUTHORIZE
//                    {
//                        AppDelObj.window?.rootViewController!.showAlert(title: AppName, message: response.responseMessage!, buttonTitles: ["Ok".localized], highlightedButtonIndex: 0) { (buttonIndex) in
//                            if buttonIndex == 0
//                            {
//                                AppDelObj.window?.unauthoriseLogout()
//                            }
//                        }
//                        return
//                    }
//                    if response.responseCode == AppResponseCode.SUCCESS
//                    {
//                        UserDefaults.standard.setLanguage(language: response.responseData?.vLangISOCode ?? "")
//                        CRSingleton.shared.customerUserDetails = response
//                        
//                        if currentCustomerUser.tiIsMobileVerified == 0
//                        {
//                            self.presenter?.actionOTPVerifyClick()
//                        }
//                        else
//                        {
//                            AppDelObj.window?.userLogin()
//                        }
//                        
//                    }
//                    else
//                    {
//                        self.presenter?.signAPIFailure(response.responseMessage!)
//                    }
//                }
//            }
//            else
//            {
//                print(error!.localizedDescription)
//                AppsingtonObj.removeActivityIndicatior()
//
//            }
//        }
    }
}

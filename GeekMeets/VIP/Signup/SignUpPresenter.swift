//
//  SignUpPresenter.swift
//  Basecode
//
//  Created by SOTSYS203 on 19/02/18.
//  Copyright (c) 2018 SOTSYS203. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol SignUpPresentationProtocol {
    func callSignUpRequest(signUpParams : Dictionary<String, Any>)
    func getSignUpResponse(userData : BaseModel?)
    
    func callCheckData()
}

class SignUpPresenter: SignUpPresentationProtocol {
    weak var viewController: SignUpProtocol?
    var interactor: SignUpInteractorProtocol?
    
    // MARK: Present something
    func callSignUpRequest(signUpParams : Dictionary<String, Any>) {
        if validateRegistration(param: signUpParams) {
            self.interactor?.callSignUpApi(params: signUpParams)
        }
    }
    
    func getSignUpResponse(userData : BaseModel?) {
        print("present something")
        //You can go to the same Viewcontroller with data
        if userData != nil {
//            let mainBoard = UIStoryboard(name: "Main", bundle: nil)
//            let objFeed = mainBoard.instantiateViewController(withIdentifier: "SOIFeedViewController") as! SOIFeedViewController
//            objFeed.objUserData = userData
//            if let view = self.viewController as? UIViewController {
//                view.navigationController?.pushViewController(objFeed, animated: true)
//            }
        } else {
            self.viewController?.displayAlert(strTitle: "", strMessage: (userData?.responseMessage)!)
        }
    }
    
    func validateRegistration(param : Dictionary<String, Any>) -> Bool {
        
        if String(describing: param["vUserName"]).isEmpty {
            self.viewController?.displayAlert(strTitle: "", strMessage: kEnterUsername)
            return false
        }
        
        if String(describing: param["vFirstName"]).isEmpty {
            self.viewController?.displayAlert(strTitle: "", strMessage: kEnterFirstname)
            return false
        }
        
        if String(describing: param["vLastName"]).isEmpty {
            self.viewController?.displayAlert(strTitle: "", strMessage: kEnterLastname)
            return false
        }
        
        if String(describing: param["vEmailId"]).isEmpty {
            self.viewController?.displayAlert(strTitle: "", strMessage: kEnterEmail)
            return false
        } else if String(describing: param["vEmailId"]).isEmail {
            self.viewController?.displayAlert(strTitle: "", strMessage: kEnterValidEmail)
            return false
        }
        
        if String(describing: param["vPassword"]).isEmpty {
            self.viewController?.displayAlert(strTitle: "", strMessage: kEnterPassword)
            return false
        } else if String(describing: param["vPassword"]).length < 8  {
            self.viewController?.displayAlert(strTitle: "", strMessage: kPasswordWeak)
            return false
        }
        
        return true
    }
    
    func callCheckData() {
        
    }
}
